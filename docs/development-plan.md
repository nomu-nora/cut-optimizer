# 取り数アプリ v1.0 開発計画

**プロジェクト名：** 取り数最適化システム
**作成日：** 2025年12月2日
**管理方法：** GitHub Issues + Projects

---

## 開発フェーズ一覧

### Phase 1: プロジェクト設計・技術設計

**目標：** システム全体の設計を固め、実装の基盤を作る

#### チケット

- [ ] #1 システムアーキテクチャ設計
  - コンポーネント構成
  - ディレクトリ構造の詳細設計
  - 状態管理方針の決定
- [ ] #2 データフロー設計
  - 入力 → 計算 → 表示の流れ
  - データの受け渡し方法
- [ ] #3 UI/UX設計
  - ワイヤーフレーム作成
  - 画面遷移図
  - レスポンシブ対応方針

---

### Phase 2: 開発環境セットアップ

**目標：** Next.jsプロジェクトを初期化し、開発環境を整える

#### チケット

- [ ] #4 Next.jsプロジェクトの初期化
  - `npx create-next-app@latest`
  - TypeScript + Tailwind CSSの設定
  - App Router構成
- [ ] #5 開発ツールの設定
  - ESLint設定
  - Prettier設定
  - Git hooks設定（Husky）
- [ ] #6 基本的なフォルダ構成の整備
  - components/
  - lib/
  - types/
  - README.md作成

---

### Phase 3: 型定義・データ構造の実装

**目標：** TypeScriptの型定義を実装し、データ構造を固める

#### チケット

- [ ] #7 基本型の定義
  - PlateConfig（元板設定）
  - CutConfig（切断設定）
  - Item（製品）
- [ ] #8 計算用の型定義
  - Placement（配置された製品）
  - FreeSpace（空きスペース）
  - Plate（元板）
- [ ] #9 結果表示用の型定義
  - PatternGroup（パターングループ）
  - CalculationResult（計算結果）

---

### Phase 4: アルゴリズム実装（コア機能）

**目標：** Guillotine Cut + First Fit Decreasingアルゴリズムを実装

#### チケット

- [ ] #10 ソート機能の実装
  - 製品を面積順にソート
- [ ] #11 配置判定ロジックの実装
  - `canPlace()` 関数
  - 90度回転の判定
- [ ] #12 スペース分割ロジックの実装
  - `splitSpace()` 関数
  - 横分割・縦分割
- [ ] #13 配置計算のメインロジック
  - 元板への配置ループ
  - カット幅の考慮
  - 余白の考慮
- [ ] #14 パターングループ化ロジック
  - 同じ配置パターンの検出
  - パターンのハッシュ化
- [ ] #15 歩留まり計算
  - `calculateYield()` 関数
  - 有効エリアの計算
- [ ] #16 アルゴリズムの単体テスト
  - テストケース作成
  - 精度検証

---

### Phase 5: UI基本構造の実装

**目標：** アプリケーションの基本的なレイアウトを構築

#### チケット

- [ ] #17 メインレイアウトの実装
  - ヘッダー
  - 入力エリア・結果表示エリアの配置
  - レスポンシブ対応
- [ ] #18 共通コンポーネントの実装
  - Button
  - Input
  - Card
  - Label
- [ ] #19 ローディング・エラー表示
  - ローディングスピナー
  - エラーメッセージ表示

---

### Phase 6: 入力フォーム・設定画面の実装

**目標：** ユーザーが元板・製品情報を入力できるようにする

#### チケット

- [ ] #20 元板設定フォームの実装
  - 幅・高さ入力
  - 単価入力
  - デフォルト値設定
- [ ] #21 切断設定フォームの実装
  - カット幅入力
  - 余白入力
- [ ] #22 製品入力フォームの実装
  - 製品名・サイズ・個数入力
  - 色選択機能
  - 追加・編集・削除機能
- [ ] #23 入力バリデーション
  - 必須項目チェック
  - 数値範囲チェック
  - エラーメッセージ表示
- [ ] #24 ローカルストレージ保存機能
  - 入力内容の自動保存
  - 復元機能

---

### Phase 7: 結果表示・配置図の実装

**目標：** 計算結果を視覚的に表示する

#### チケット

- [ ] #25 サマリー表示の実装
  - 必要元板枚数
  - 平均歩留まり率
  - 総コスト
- [ ] #26 パターン一覧表示
  - グリッドレイアウト
  - パターンごとのカード表示
- [ ] #27 配置図の描画（Canvas/SVG）
  - 元板の枠表示
  - 製品の矩形表示（色分け）
  - 製品名の表示
  - カット線の表示
- [ ] #28 配置図のインタラクティブ機能
  - ホバー時の情報表示
  - 拡大縮小機能（オプション）

---

### Phase 8: 印刷機能の実装

**目標：** 配置図を印刷可能にする

#### チケット

- [ ] #29 印刷用CSSの実装
  - @media print
  - ページ区切り設定
  - 印刷時のレイアウト調整
- [ ] #30 印刷プレビュー機能
  - 印刷前の確認画面
- [ ] #31 PDF出力対応
  - ブラウザの印刷機能を活用
  - A4サイズ対応

---

### Phase 9: テスト・デバッグ

**目標：** 動作確認と品質向上

#### チケット

- [ ] #32 単体テストの追加
  - アルゴリズムのテスト
  - ユーティリティ関数のテスト
- [ ] #33 統合テスト
  - 入力 → 計算 → 表示の流れ
  - エッジケースの確認
- [ ] #34 実データでの検証
  - 実家の業務データで試験
  - 歩留まり率の検証
- [ ] #35 バグ修正
  - 発見されたバグの修正
- [ ] #36 パフォーマンス最適化
  - 計算速度の改善
  - レンダリング最適化

---

### Phase 10: デプロイ・リリース

**目標：** Vercelにデプロイし、v1.0をリリース

#### チケット

- [ ] #37 Vercelプロジェクトの作成
  - Vercelアカウント設定
  - プロジェクト連携
- [ ] #38 環境変数の設定
  - 本番環境の設定
- [ ] #39 本番デプロイ
  - 初回デプロイ
  - 動作確認
- [ ] #40 ドキュメント整備
  - README.md完成
  - 使い方ガイド作成
- [ ] #41 v1.0リリース
  - リリースノート作成
  - タグ付け

---

## 進捗管理方法

### GitHub Issues

- 各チケットをGitHub Issueとして作成
- ラベルで分類：
  - `phase-1` ~ `phase-10`
  - `design`, `implementation`, `test`, `documentation`
  - `priority-high`, `priority-medium`, `priority-low`

### GitHub Projects

- プロジェクトボードで進捗を可視化
- カラム：
  - `Backlog`（未着手）
  - `In Progress`（作業中）
  - `Review`（レビュー待ち）
  - `Done`（完了）

### マイルストーン

- 各Phaseをマイルストーンとして設定
- Phase完了ごとにマイルストーンをクローズ

---

## 成功基準

### v1.0の完成条件

- [ ] 全てのPhaseが完了
- [ ] 実家の業務データで動作確認完了
- [ ] 手作業より歩留まり率が5%以上向上
- [ ] 計算時間が1分以内
- [ ] エラーなく安定動作

---

## 次のステップ

1. GitHubリポジトリ作成
2. この計画書をベースにIssuesを作成
3. Projectsボードをセットアップ
4. Phase 1から順次着手
