# リリースノート - 取り数最適化システム

## 🎨 v1.2.1 - UI改善

**リリース日**: 2025-12-10

### ✨ UI変更

#### レイアウト改善

- ✅ **アルゴリズム選択をアコーディオン形式に変更**
  - 選択中のアルゴリズムのみ表示
  - クリックで展開し、Guillotine Cut / Maximal Rectanglesから選択
  - 視覚的にわかりやすいUI
- ✅ **計算実行セクションを結果エリアの上部に移動**
  - 複数の設定で計算・比較検討がしやすく
  - アルゴリズム選択、最適化目標、オプションを1箇所に集約
  - ユーザーが頻繁に使う機能へのアクセス性向上
- ✅ **計算実行ボタンを大きく、視覚的に目立つように改善**
  - ローディング表示の改善
  - ヒント表示の追加

#### 新規コンポーネント

- ✅ **AlgorithmSelector**: アコーディオン式アルゴリズム選択
- ✅ **CalculationControl**: 計算実行セクション統合UI

### 🎯 改善

- 設定変更→計算→比較のワークフローが自然に
- レイアウトがすっきりして操作しやすく
- ユーザビリティの向上

---

## 🚀 v1.2.0 - 最適化強化

**リリース日**: 2025-12-10

### ✨ 新機能

#### 遺伝的アルゴリズム（GA）

- ✅ **GA実装**: 配置順序とソート戦略の進化的最適化
  - より広い解空間を探索して最適解を発見
  - 計算時間約10-20秒で高精度な配置を生成
  - 個体数20、世代数15でバランスの取れた探索

#### グリッド配置機能

- ✅ **動的グリッド生成**: 同じサイズの製品を格子状に配置
  - 空きスペースに応じて最適なグリッドサイズを自動選択
  - 2×2から5×5までの組み合わせを試行
  - 切断作業の効率化

#### 最適化目標の強化

- ✅ **歩留まり優先**: 材料の無駄を最小化
- ✅ **余りスペース優先**: 次回活用しやすい形状の余りを確保
  - 正方形に近いグリッドを優先
  - 左下詰め配置で余白を右上にまとめる

#### 余りスペース品質評価

- ✅ **3要素での総合評価**
  - 集中度（40%）: 余り矩形の数が少ない方が良い
  - 形状（30%）: 正方形に近い形状が良い
  - サイズ（30%）: 大きな余りスペースが良い

#### 配置アルゴリズムの改善

- ✅ **バックトラッキング**: 新規元板作成前に既存元板への配置を試行
  - 低歩留まり元板の削減
  - 全体的な歩留まり率の向上

### 🎯 改善

- 歩留まり率のさらなる向上
- 元板枚数の最適化
- 余りスペースの再活用性向上
- 実用性の大幅な向上

---

## 🎯 v1.1.0 - Maximal Rectangles実装

**リリース日**: 2025-12-09

### ✨ 新機能

#### Maximal Rectanglesアルゴリズム

- ✅ **Maximal Rectangles実装**: ギロチンカットの制約を撤廃
  - L字型などの複雑な空きスペースを活用
  - より柔軟な配置が可能に
  - 歩留まり率が大幅に向上

#### ヒューリスティックの自動試行

- ✅ **4つのヒューリスティックを実装**
  - Best Short Side Fit（短辺の余り最小）
  - Best Long Side Fit（長辺の余り最小）
  - Best Area Fit（面積の余り最小）
  - Bottom Left（左下優先）
- ✅ **自動選択**: 4つすべてを試行し、最良の結果を自動選択

#### アルゴリズム選択機能

- ✅ **Guillotine Cut / Maximal Rectanglesの切り替え**
  - ユーザーが選択可能
  - 用途に応じた使い分けが可能

### 🎯 改善

- 歩留まり率が大幅に向上（70-75% → 80-85%）
- 元板枚数の削減
- より実用的な配置パターン
- 現場で使える最低限レベルを達成

---

## 🎉 v1.0.0 - 初回リリース

**リリース日**: 2025-12-03

### ✨ 新機能

#### コア機能

- ✅ **元板設定機能**: 元板の幅、高さ、単価を設定可能
- ✅ **カット設定機能**: カット幅と余白を設定可能
- ✅ **製品管理機能**: 製品の追加・編集・削除が可能
  - 製品名、幅、高さ、数量、色の設定
  - 12色のカラーパレットから選択
- ✅ **プリセット機能**: テスト用のプリセットデータを3種類用意
  - 基本テスト
  - 小さい製品
  - 大きい製品

#### 計算機能

- ✅ **Guillotine Cut + First Fit Decreasing アルゴリズム**
  - 面積順ソート（同一面積の場合はアスペクト比で判定）
  - 最大残余スペースヒューリスティックによる回転判定
  - ギロチンカットによる空間分割
- ✅ **パターングループ化**: 同じ配置パターンを自動的にグループ化
- ✅ **歩留まり計算**: 各パターンと全体の平均歩留まり率を計算
- ✅ **コスト計算**: 必要元板数と単価から総コストを自動計算
- ✅ **大きすぎる製品の検出**: 元板に収まらない製品を自動スキップして警告表示

#### 表示機能

- ✅ **計算結果サマリー**: 必要枚数、平均歩留まり、総コストを表示
- ✅ **パターン一覧**: パターンID（A, B, C...）、枚数、製品数、歩留まりを一覧表示
- ✅ **配置図**: SVGによる高品質な配置図
  - 製品名と寸法の表示
  - 回転の視覚的表示
  - カラー表示
  - 元板寸法とマージンの表示
- ✅ **スキップ製品の警告**: 配置できなかった製品を警告表示

#### 印刷機能

- ✅ **印刷プレビュー**: 印刷前に内容を確認可能
- ✅ **印刷最適化**: A4横向き、ページ分割対応
- ✅ **カラー印刷対応**: 製品の色を維持して印刷

#### UI/UX

- ✅ **レスポンシブデザイン**: PC・タブレット対応
- ✅ **2カラムレイアウト**: 入力エリアと結果表示エリアを並列配置
- ✅ **リアルタイムバリデーション**: 入力エラーを即座に表示
- ✅ **ローディング表示**: 計算中のフィードバック
- ✅ **エラーハンドリング**: わかりやすいエラーメッセージ

### 🔧 技術スタック

- **フレームワーク**: Next.js 15 (App Router)
- **言語**: TypeScript 5
- **スタイリング**: Tailwind CSS
- **テスト**: Jest + Testing Library (18テストケース、すべて合格)
- **コード品質**: ESLint + Prettier + Husky + lint-staged

### 📊 テスト結果

- ✅ **ユニットテスト**: 18/18 合格
  - ソート機能: 11テスト
  - 歩留まり計算: 7テスト
  - 統合テスト: 複数シナリオ

### 🎯 パフォーマンス

- **ビルドサイズ**: 111 KB (First Load JS)
- **ビルド時間**: ~3秒
- **計算速度**: 製品数100個まで1秒以内

### 📝 ドキュメント

- ✅ README.md: プロジェクト概要と使用方法
- ✅ DEPLOYMENT.md: デプロイガイド
- ✅ docs/torikazu_app_requirements_v1.0.md: 要件定義書
- ✅ docs/architecture.md: アーキテクチャ設計書
- ✅ docs/data-flow.md: データフロー設計書
- ✅ docs/ui-ux-design.md: UI/UX設計書
- ✅ docs/algorithm-details.md: アルゴリズム詳細仕様書
- ✅ docs/development-plan.md: 開発計画書

### ⚠️ 既知の制限事項（v1.0）

1. **データ永続化なし**: ブラウザをリロードするとデータが消える
2. **製品プリセット削除**: v1.0ではプリセットの削除機能なし（テスト用のため）
3. **編集履歴なし**: 計算結果の比較や履歴機能なし
4. **シングルユーザー**: 複数ユーザーでの同時使用は想定していない
5. **印刷レイアウト固定**: A4横向きのみ対応

これらは将来のバージョンで改善予定です。

### 🔮 次期バージョンの予定（v1.1+）

- データ永続化（localStorage/IndexedDB）
- 計算履歴の保存と比較機能
- プリセットの追加・編集・削除機能
- PDF エクスポート機能
- より高度な配置アルゴリズム
- パフォーマンスの最適化
- モバイル対応の強化

### 👥 貢献者

- **開発**: こうへい
- **対象企業**: ノムラ合成株式会社
- **開発支援**: Claude Code (Anthropic)

### 📦 インストール方法

```bash
# リポジトリをクローン
git clone <repository-url>
cd cut-optimizer

# 依存関係をインストール
npm install

# 開発サーバーを起動
npm run dev
```

ブラウザで http://localhost:3000 にアクセス

### 🐛 バグ報告

問題が発生した場合は、以下の情報を添えて報告してください：

- 使用環境（OS、ブラウザ）
- 再現手順
- エラーメッセージ（あれば）
- スクリーンショット（あれば）

---

**Generated with [Claude Code](https://claude.com/claude-code)**

**v1.0.0 - 2025-12-03** ✅
